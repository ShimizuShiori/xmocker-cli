webpackJsonp([4],{103:function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e(19),i=e.n(r);n.default={props:{prefixCls:{type:String,default:""},duration:{type:Number,default:1.5},type:{type:String},content:{type:String,default:""},styles:{type:Object,default:function(){return{right:"50%"}}},closable:{type:Boolean,default:!1},className:{type:String},name:{type:String,required:!0},onClose:{type:Function},transitionName:{type:String}},data:function(){return{withDesc:!1}},computed:{baseClass:function(){return this.prefixCls+"-notice"},classes:function(){var t;return[this.baseClass,(t={},i()(t,""+this.className,!!this.className),i()(t,this.baseClass+"-closable",this.closable),i()(t,this.baseClass+"-with-desc",this.withDesc),t)]},contentClasses:function(){return this.baseClass+"-content"}},methods:{clearCloseTimer:function(){this.closeTimer&&(clearTimeout(this.closeTimer),this.closeTimer=null)},close:function(){this.clearCloseTimer(),this.onClose(),this.$parent.close(this.name)}},mounted:function(){var t=this;this.clearCloseTimer(),0!==this.duration&&(this.closeTimer=setTimeout(function(){t.close()},1e3*this.duration)),"ivu-notice"===this.prefixCls&&(this.withDesc=""!==this.$refs.content.querySelectorAll("."+this.prefixCls+"-desc")[0].innerHTML)},beforeDestroy:function(){this.clearCloseTimer()}}},104:function(t,n,e){"use strict";function r(){return"ivuNotification_"+f+"_"+l++}Object.defineProperty(n,"__esModule",{value:!0});var i=e(42),o=e.n(i),c=e(19),a=e.n(c),s=e(168),u=e.n(s),l=0,f=Date.now();n.default={components:{Notice:u.a},props:{prefixCls:{type:String,default:"ivu-notification"},styles:{type:Object,default:function(){return{top:"65px",left:"50%"}}},content:{type:String},className:{type:String}},data:function(){return{notices:[]}},computed:{classes:function(){return[""+this.prefixCls,a()({},""+this.className,!!this.className)]}},methods:{add:function(t){var n=t.name||r(),e=o()({styles:{right:"50%"},content:"",duration:1.5,closable:!1,name:n},t);this.notices.push(e)},close:function(t){for(var n=this.notices,e=0;e<n.length;e++)if(n[e].name===t){this.notices.splice(e,1);break}},closeAll:function(){this.notices=[]}}}},105:function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e(41);n.default={name:"app",created:function(){this.initSocket()},methods:{initSocket:function(){var t=this;e.i(r.a)().then(function(n){var e=6001;n.code||(e=n.data.managePort||6001),t.$socket.init({port:e})})}}}},106:function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default={name:"page-action-project-list",data:function(){return{}},methods:{projectNext:function(t,n){this.$store.commit("project/INCREMENT",n)}}}},107:function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default={name:"page-action-project-list",data:function(){return{}},computed:{pageNo:function(){return this.$store.state.project.pageNo+1},total:function(){return this.$store.getters["project/totalSize"]}},methods:{projectNext:function(t,n){this.$store.commit("project/INCREMENT",n)},addProject:function(){this.$router.push({name:"项目编辑"})}}}},108:function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default={name:"layout-default",mounted:function(){this.context=document.querySelector(".layout-content"),this.topBar=document.querySelector(".layout-topbar"),this.copy=document.querySelector(".layout-copy"),this.setMinHeight()},computed:{actionBar:function(){return this.$store.state.actionBar},actived:function(){return this.$route.path.slice(1)||"index"}},methods:{setMinHeight:function(){if(window){var t=document.documentElement.clientHeight;this.context.style["min-height"]=t-this.topBar.clientHeight-this.copy.clientHeight-30+"px"}},selectMenu:function(t){this.$router.push({name:t})}}}},157:function(t,n){},158:function(t,n){},159:function(t,n){},165:function(t,n,e){e(157);var r=e(11)(e(106),e(170),null,null);t.exports=r.exports},166:function(t,n,e){e(159);var r=e(11)(e(107),e(172),null,null);t.exports=r.exports},167:function(t,n,e){e(158);var r=e(11)(e(108),e(171),"data-v-1a352890",null);t.exports=r.exports},168:function(t,n,e){var r=e(11)(e(103),e(173),null,null);t.exports=r.exports},169:function(t,n,e){var r=e(11)(e(104),e(174),null,null);t.exports=r.exports},170:function(t,n){t.exports={render:function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticStyle:{display:"inline-block",float:"right"}},[e("a",{staticClass:"cus-action-link",attrs:{href:"javascript:;"}},[t._v("新增API")]),t._v(" "),e("a",{staticClass:"cus-action-link",attrs:{href:"javascript:;"}},[t._v("搜索")]),t._v(" "),e("a",{staticClass:"cus-action-link",attrs:{href:"javascript:;"},on:{click:function(n){t.projectNext(n,-1)}}},[t._v("上一页")]),t._v(" "),e("span",[t._v("0")]),t._v("/"),e("span",[t._v("0")]),t._v(" "),e("a",{staticClass:"cus-action-link",attrs:{href:"javascript:;"},on:{click:function(n){t.projectNext(n,1)}}},[t._v("下一页")])])},staticRenderFns:[]}},171:function(t,n){t.exports={render:function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"layout"},[e("Menu",{staticClass:"layout-topbar",attrs:{mode:"horizontal","active-name":t.actived}},[e("div",{staticClass:"layout-logo"},[t._v("API后台管理")]),t._v(" "),e("div",{staticClass:"layout-nav"},[e("Menu-item",{attrs:{name:"index"},nativeOn:{click:function(n){t.selectMenu("首页")}}},[e("Icon",{attrs:{type:"ios-navigate"}}),t._v("\n                首页\n            ")],1),t._v(" "),e("Menu-item",{attrs:{name:"projectList"},nativeOn:{click:function(n){t.selectMenu("项目列表")}}},[e("Icon",{attrs:{type:"ios-keypad"}}),t._v("\n                项目列表\n            ")],1),t._v(" "),e("Menu-item",{attrs:{name:"search"},nativeOn:{click:function(n){t.selectMenu("搜索")}}},[e("Icon",{attrs:{type:"ios-analytics"}}),t._v("\n                搜索\n            ")],1),t._v(" "),e("Menu-item",{attrs:{name:"config"},nativeOn:{click:function(n){t.selectMenu("基础配置")}}},[e("Icon",{attrs:{type:"ios-paper"}}),t._v("\n                配置\n            ")],1),t._v(" "),e("Menu-item",{attrs:{name:"syncList"},nativeOn:{click:function(n){t.selectMenu("同步")}}},[e("Icon",{attrs:{type:"ios-paper"}}),t._v("\n                同步\n            ")],1)],1),t._v(" "),e("div",{staticClass:"layout-right"},[e("Menu-item",{attrs:{name:"log"},nativeOn:{click:function(n){t.selectMenu("日志")}}},[e("Icon",{attrs:{type:"ios-navigate"}}),t._v("\n                日志\n            ")],1),t._v(" "),e("Menu-item",{attrs:{name:"about"},nativeOn:{click:function(n){t.selectMenu("关于")}}},[e("Icon",{attrs:{type:"ios-keypad"}}),t._v("\n                关于\n            ")],1)],1)]),t._v(" "),e("div",{staticClass:"layout-content"},[e("transition",{attrs:{name:"scale-out",mode:"out-in"}},[e("router-view")],1)],1),t._v(" "),e("div",{staticClass:"layout-copy"},[t._v("\n        API管理\n    ")])],1)},staticRenderFns:[]}},172:function(t,n){t.exports={render:function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticStyle:{display:"inline-block",float:"right"}},[e("a",{staticClass:"cus-action-link",attrs:{href:"javascript:;"},on:{click:t.addProject}},[t._v("新增项目")]),t._v(" "),e("a",{staticClass:"cus-action-link",attrs:{href:"javascript:;"}},[t._v("搜索")]),t._v(" "),e("a",{staticClass:"cus-action-link",attrs:{href:"javascript:;"},on:{click:function(n){t.projectNext(n,-1)}}},[t._v("上一页")]),t._v(" "),e("div",{staticClass:"cus-page-info"},[e("span",[t._v(t._s(t.pageNo))]),t._v("/"),e("span",[t._v(t._s(t.total))])]),t._v(" "),e("a",{staticClass:"cus-action-link",attrs:{href:"javascript:;"},on:{click:function(n){t.projectNext(n,1)}}},[t._v("下一页")])])},staticRenderFns:[]}},173:function(t,n){t.exports={render:function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("transition",{attrs:{name:t.transitionName}},[e("div",{class:t.classes,style:t.styles},["notice"===t.type?[e("div",{ref:"content",class:[t.baseClass+"-content"],domProps:{innerHTML:t._s(t.content)}}),t._v(" "),t.closable?e("a",{class:[t.baseClass+"-close"],on:{click:t.close}},[e("i",{staticClass:"ivu-icon ivu-icon-ios-close-empty"})]):t._e()]:t._e(),t._v(" "),"message"===t.type?[e("div",{ref:"content",class:[t.baseClass+"-content"]},[e("div",{class:[t.baseClass+"-content-text"],domProps:{innerHTML:t._s(t.content)}}),t._v(" "),t.closable?e("a",{class:[t.baseClass+"-close"],on:{click:t.close}},[e("i",{staticClass:"ivu-icon ivu-icon-ios-close-empty"})]):t._e()])]:t._e()],2)])},staticRenderFns:[]}},174:function(t,n){t.exports={render:function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{class:t.classes,style:t.styles},t._l(t.notices,function(n){return e("Notice",{key:n.name,attrs:{"prefix-cls":t.prefixCls,styles:n.styles,type:n.type,content:n.content,duration:n.duration,closable:n.closable,name:n.name,"transition-name":n.transitionName,"on-close":n.onClose}})}))},staticRenderFns:[]}},175:function(t,n){t.exports={render:function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]}},40:function(t,n,e){"use strict";var r=e(10),i=e(178),o=e(96),c=(e.n(o),e(97)),a=e(99),s=e(98);r.default.use(i.a);var u={actionBar:""},l={SET_ACTIONBAR:function(t,n){t.actionBar=n}};n.a=new i.a.Store({state:u,actions:o,getters:c,mutations:l,modules:{project:a.a,log:s.a},strict:!1})},41:function(t,n,e){"use strict";e.d(n,"j",function(){return u}),e.d(n,"k",function(){return l}),e.d(n,"v",function(){return f}),e.d(n,"i",function(){return p}),e.d(n,"l",function(){return d}),e.d(n,"m",function(){return h}),e.d(n,"n",function(){return m}),e.d(n,"E",function(){return v}),e.d(n,"q",function(){return _}),e.d(n,"r",function(){return y}),e.d(n,"s",function(){return C}),e.d(n,"p",function(){return g}),e.d(n,"o",function(){return S}),e.d(n,"z",function(){return b}),e.d(n,"t",function(){return j}),e.d(n,"y",function(){return E}),e.d(n,"u",function(){return T}),e.d(n,"w",function(){return x}),e.d(n,"A",function(){return k}),e.d(n,"B",function(){return P}),e.d(n,"C",function(){return N}),e.d(n,"x",function(){return M}),e.d(n,"D",function(){return L}),e.d(n,"f",function(){return O}),e.d(n,"d",function(){return I}),e.d(n,"g",function(){return w}),e.d(n,"h",function(){return A}),e.d(n,"e",function(){return D}),e.d(n,"b",function(){return R}),e.d(n,"a",function(){return $}),e.d(n,"c",function(){return q});var r=e(18),i=e.n(r),o=e(77),c=e.n(o),a=e(101),s=c.a.create({baseURL:"/mock"});s.interceptors.response.use(function(t){return t.data.code&&a.a.error(t.data.err),t.data},function(t){return i.a.reject(t)});var u=function(t){return s.put("/lib",t)},l=function(t){return s.post("/lib",t)},f=function(t){return s.request({url:"/lib",params:t})},p=function(t){return s.request({url:"/libDetail",params:t})},d=function(t){return s.request({url:"/lib",method:"delete",params:t})},h=function(t){return s.put("/project",t)},m=function(t){return s.post("/project",t)},v=function(t){return s.request({url:"/project",params:t})},_=function(t){return s.request({url:"/project",method:"delete",params:t})},y=function(t){return s.put("/startProject",t)},C=function(t){return s.put("/stopProject",t)},g=function(t){return s.request({url:"/api",params:t})},S=function(t){return s.request({url:"/search/api",params:t})},b=function(t){return s.request({url:"/apiDetail",params:t})},j=function(t){return s.put("/apiBase",t)},E=function(t){return s.put("/copyApi",t)},T=function(t){return s.put("/apiStatus",t)},x=function(t){return s.request({url:"/apiModelList",params:t})},k=function(t){return s.post("/apiBase",t)},P=function(t){return s.put("/apiModel",t)},N=function(t){return s.post("/apiModel",t)},M=function(t){return s.request({url:"/api",method:"delete",params:t})},L=function(t){return s.request({url:"/apiModel",method:"delete",params:t})},O=function(t){return s.request({url:"/clientGetProjDiff",params:t})},I=function(t){return s.request({url:"/clientGetApiDiff",params:t})},w=function(t){return s.put("/clientDownLoadProjBase",t)},A=function(t){return s.put("/clientDownLoadProj",t)},D=function(t){return s.put("/clientDownLoadApi",t)},R=function(t){return s.put("/appBase",t)},$=function(t){return s.request({url:"/appBase",params:t})},q=function(t){return s.put("/upgradeV0",t)}},67:function(t,n,e){"use strict";var r=e(10);r.default.component("project-list-action",e(166)),r.default.component("project-detail-action",e(165))},68:function(t,n,e){"use strict";var r=e(43),i=e.n(r),o=e(18),c=e.n(o),a=e(41);n.a={methods:{getProjectList:function(){var t=this;return e.i(a.E)({pageSize:5e3}).then(function(n){n.code||(n.data.list.sort(function(t,n){return t.status?0:n.status?1:0}),t.$store.commit("project/SET_PROJECT_LIST",n.data.list))})},checkProjectList:function(){return this.$store.state.project.list.length?c.a.resolve():this.freshProject()},freshProject:function(){return this.$store.dispatch("project/CHECK_PROJECT_LIST",this)},btnAction:function(t){"function"==typeof this[t]&&this[t]()},copyToObj:function(t,n,e){i()(t).forEach(function(e){void 0!==n[e]&&(t[e]=n[e])}),e&&e.forEach(function(e){"string"==typeof e?void 0!==n[e]&&(t[e]=n[e]):void 0!==n[e[1]]&&(t[e[0]]=n[e[1]])})}}}},69:function(t,n,e){"use strict";var r=e(10),i=e(176),o=e(40);r.default.use(i.a);var c=function(t){return e.e(1).then(function(){return t(e(184))}.bind(null,e)).catch(e.oe)},a=function(t){return e.e(2).then(function(){return t(e(183))}.bind(null,e)).catch(e.oe)},s=function(t){return e.e(0).then(function(){return t(e(182))}.bind(null,e)).catch(e.oe)},u=function(t){return e.e(0).then(function(){return t(e(191))}.bind(null,e)).catch(e.oe)},l=function(t){return e.e(2).then(function(){return t(e(189))}.bind(null,e)).catch(e.oe)},f=function(t){return e.e(1).then(function(){return t(e(190))}.bind(null,e)).catch(e.oe)},p=function(t){return e.e(1).then(function(){return t(e(187))}.bind(null,e)).catch(e.oe)},d=function(t){return e.e(0).then(function(){return t(e(194))}.bind(null,e)).catch(e.oe)},h=function(t){return e.e(2).then(function(){return t(e(193))}.bind(null,e)).catch(e.oe)},m=function(t){return e.e(1).then(function(){return t(e(185))}.bind(null,e)).catch(e.oe)},v=function(t){return e.e(0).then(function(){return t(e(186))}.bind(null,e)).catch(e.oe)},_=function(t){return e.e(0).then(function(){return t(e(192))}.bind(null,e)).catch(e.oe)},y=function(t){return e.e(0).then(function(){return t(e(181))}.bind(null,e)).catch(e.oe)},C=function(t){return e.e(0).then(function(){return t(e(188))}.bind(null,e)).catch(e.oe)},g=new i.a({routes:[{path:"/",component:e(167),children:[{path:"",name:"首页",component:v},{path:"apiEditor",name:"API编辑",component:c},{path:"apiDetail",name:"API详情",component:a},{path:"apiCopy",name:"API复制",component:s},{path:"projectList",name:"项目列表",component:u,meta:{actionBar:"project-list-action"}},{path:"projectDetail",name:"项目详情",component:l,meta:{actionBar:"project-detail-action"}},{path:"projectEditor",name:"项目编辑",component:f},{path:"libEditor",name:"模板编辑",component:p},{path:"syncList",name:"同步",component:d},{path:"syncApi",name:"同步API",component:h},{path:"search",name:"搜索",component:_},{path:"config",name:"基础配置",component:m},{path:"log",name:"日志",component:C},{path:"about",name:"关于",component:y}]}]});g.beforeEach(function(t,n,e){return o.a.commit("SET_ACTIONBAR",t.meta.actionBar),e()}),n.a=g},70:function(t,n,e){"use strict";var r=e(75),i=e.n(r),o=e(18),c=e.n(o),a=e(111),s=e.n(a),u=e(112),l=e.n(u),f=function(){function t(n){s()(this,t),this.container={},this.store=n,this.unSendList=[]}return l()(t,[{key:"init",value:function(t){var n=this,e=t.port,r=void 0===e?6001:e,i=void 0;i=new WebSocket("ws://"+window.location.hostname+":"+r),i.onopen=function(t){n.socket=i,n.unSendList.length&&n.unSendList.forEach(function(t){n.socket.send(t)}),n.unSendList=[],i.onmessage=function(t){try{var e=JSON.parse(t.data)}catch(t){}if(e){var r=e.id;if(r){var i=n.container[r];if(!i)return;i.resolve(e),delete n.container[r]}else n.savePush(e)}}},i.onclose=function(t){setTimeout(n.init,5e3)},i.onerror=function(t){}}},{key:"send",value:function(t){var n=this;return new c.a(function(e,r){t.id=+new Date,n.container[t.id]={resolve:e,reject:r};var o=i()(t);n.socket?n.socket.send(o):n.unSendList.push(o)})}},{key:"savePush",value:function(t){var n=t.type,e=t.action;this.store.commit(n+"/"+e,t)}}]),t}();n.a=f},71:function(t,n){},72:function(t,n){},74:function(t,n,e){var r=e(11)(e(105),e(175),null,null);t.exports=r.exports},95:function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e(51),i=e.n(r),o=e(10),c=e(74),a=e.n(c),s=e(69),u=e(40),l=e(73),f=e.n(l),p=e(71),d=(e.n(p),e(68)),h=e(72),m=(e.n(h),e(67),e(70));o.default.use(f.a),o.default.prototype.$socket=new m.a(u.a),o.default.config.productionTip=!1,o.default.mixin(i()({},d.a)),new o.default({el:"#app",router:s.a,store:u.a,template:"<App/>",components:{App:a.a}})},96:function(t,n){},97:function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),e.d(n,"cartProducts",function(){return r});var r=function(t){}},98:function(t,n,e){"use strict";var r,i=e(19),o=e.n(i),c=e(52),a=e.n(c),s=e(50),u=e.n(s),l={SET_LOGS:"SET_LOGS",ADD_LOGS:"ADD_LOGS"},f={err:[],his:[],proxy:[],fetchTime:0},p={},d=o()({},l.CHECK_PROJECT_LIST,function(t,n){var e=this;t.dispatch;return u()(a.a.mark(function t(){return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.getProjectList();case 2:case"end":return t.stop()}},t,e)}))()}),h=(r={},o()(r,l.SET_LOGS,function(t,n){t.err=n.filter(function(t){return"error"===t._type}),t.his=n.filter(function(t){return"his"===t._type}),t.proxy=n.filter(function(t){return"proxy"===t._type}),t.fetchTime=+new Date}),o()(r,l.ADD_LOGS,function(t,n){var e=n.logType;e="error"===e?"err":e,t[e].unshift(n.data)}),r);n.a={namespaced:!0,state:f,getters:p,actions:d,mutations:h}},99:function(t,n,e){"use strict";var r,i=e(19),o=e.n(i),c=e(52),a=e.n(c),s=e(50),u=e.n(s),l={SET_PROJECT_LIST:"SET_PROJECT_LIST",CHECK_PROJECT_LIST:"CHECK_PROJECT_LIST",INCREMENT:"INCREMENT",SET_PAGE_SIZE:"SET_PAGE_SIZE"},f={list:[],pageSize:6,pageNo:0},p={selector:function(t){return t.list.map(function(t){return{name:t.name,id:t._id}})},pagedList:function(t){return t.list.slice(t.pageNo*t.pageSize,t.pageNo*t.pageSize+t.pageSize)},totalSize:function(t){return Math.ceil(t.list.length/t.pageSize)},reachLast:function(t){var n=Math.floor(t.list.length/t.pageSize);return t.pageNo>=n},reachZero:function(t){return t.pageNo<=0}},d=o()({},l.CHECK_PROJECT_LIST,function(t,n){var e=this;t.dispatch;return u()(a.a.mark(function t(){return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.getProjectList();case 2:case"end":return t.stop()}},t,e)}))()}),h=(r={},o()(r,l.SET_PROJECT_LIST,function(t,n){t.list=n}),o()(r,l.INCREMENT,function(t,n){n>0&&p.reachLast(t)||n<0&&p.reachZero(t)||(t.pageNo+=n)}),o()(r,l.SET_PAGE_SIZE,function(t,n){t.pageSize=n}),r);n.a={namespaced:!0,state:f,getters:p,actions:d,mutations:h}}},[95]);
//# sourceMappingURL=app.4c6e33da.js.map